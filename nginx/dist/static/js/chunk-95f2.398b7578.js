(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-95f2"],{"3AaD":function(e,t,l){},"8w0x":function(e,t,l){"use strict";var a=l("3AaD");l.n(a).a},aFNf:function(e,t,l){var a=l("c01Q"),n=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},dSCb:function(e,t,l){"use strict";l.r(t);var a=l("bS4n"),n=l.n(a),o=l("omC7"),i=l.n(o),r=l("t3Un"),s=l("/tFb"),c=l.n(s);var u={name:"Generator",data:function(){return{list:null,total:0,listLoading:!0,columns:[],columnsLoading:!0,listQuery:{page:1,limit:20},dataForm:{tableName:"",serviceTitle:""},dialogFormVisible:!1,rules:{tableName:[{required:!0,message:"表名不能为空",trigger:"blur"}],title:[{required:!0,message:"服务名不能为空",trigger:"blur"}],folder:[{required:!0,message:"页面文件夹不能为空",trigger:"blur"}],pageName:[{required:!0,message:"页面名称不能为空",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,(this.listQuery,Object(r.a)({method:"get",params:{_gp:"admin.generator",_mt:"listTable"}})).then(function(t){e.list=t.data.data,e.listLoading=!1}).catch(function(){e.list=[],e.listLoading=!1})},resetForm:function(){this.dataForm={id:void 0}},generateShow:function(e){var t=this;this.dialogFormVisible=!0,this.columnsLoading=!0,this.dataForm.tableName=e.name,function(e){return Object(r.a)({method:"get",params:{_gp:"admin.generator",_mt:"loadColumns",tableName:e}})}(e.name).then(function(e){t.columnsLoading=!1,t.columns=e.data.data}).catch(function(){t.columns=[],t.columnsLoading=!1})},handleGenerate:function(){var e=this;this.$refs.dataForm.validate(function(t){t&&(e.submiting=!0,function(e){return Object(r.a)({method:"post",data:c.a.stringify({_gp:"admin.generator",_mt:"generate",generateDTO:i()(e)})})}(n()({},e.dataForm,{columnDefinitionList:e.columns})).then(function(t){e.$notify.success({title:"成功",message:"生成代码成功！"}),e.submiting=!1,e.dialogFormVisible=!1}).catch(function(){e.submiting=!1}))})}}},m=(l("8w0x"),l("ZrdR")),d=Object(m.a)(u,function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,size:"small","element-loading-text":"正在查询中。。。",border:"",fit:"","highlight-current-row":""}},[l("el-table-column",{attrs:{align:"center",label:"表名",prop:"name"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"是否已经生成",prop:"exist"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.exist?"已生成":"未生成"))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"操作","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.exist?e._e():l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(l){e.generateShow(t.row)}}},[e._v("生成")])]}}])})],1),e._v(" "),l("el-dialog",{attrs:{visible:e.dialogFormVisible,fullscreen:!0,title:"生成Admin服务代码"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{ref:"dataForm",staticStyle:{width:"700px","margin-left":"50px"},attrs:{rules:e.rules,model:e.dataForm,"status-icon":"","label-position":"left","label-width":"150px"}},[l("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[l("el-input",{attrs:{disabled:!0},model:{value:e.dataForm.tableName,callback:function(t){e.$set(e.dataForm,"tableName",t)},expression:"dataForm.tableName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"服务名称",prop:"title"}},[l("el-input",{model:{value:e.dataForm.title,callback:function(t){e.$set(e.dataForm,"title",t)},expression:"dataForm.title"}})],1),e._v(" "),l("el-form-item",[l("el-alert",{attrs:{title:"服务名称（全英文，比如RoleService -> sys.Role 即可）",type:"info"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"服务文件夹",prop:"folder"}},[l("el-input",{model:{value:e.dataForm.folder,callback:function(t){e.$set(e.dataForm,"folder",t)},expression:"dataForm.folder"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"页面名",prop:"pageName"}},[l("el-input",{model:{value:e.dataForm.pageName,callback:function(t){e.$set(e.dataForm,"pageName",t)},expression:"dataForm.pageName"}})],1)],1),e._v(" "),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.columnsLoading,expression:"columnsLoading"}],attrs:{data:e.columns,size:"small","element-loading-text":"正在查询中。。。",border:"",fit:"","highlight-current-row":""}},[l("el-table-column",{attrs:{align:"center",label:"列名",prop:"name"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"别名",prop:"alias"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"中文名",prop:"chinese"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{size:"small"},model:{value:t.row.chinese,callback:function(l){e.$set(t.row,"chinese",l)},expression:"scope.row.chinese"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"映射Java",prop:"clazz"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{size:"small"},model:{value:t.row.clazz,callback:function(l){e.$set(t.row,"clazz",l)},expression:"scope.row.clazz"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"钱？",prop:"chinese"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-checkbox",{model:{value:t.row.money,callback:function(l){e.$set(t.row,"money",l)},expression:"scope.row.money"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"列表展示",prop:"showInList"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-checkbox",{model:{value:t.row.showInList,callback:function(l){e.$set(t.row,"showInList",l)},expression:"scope.row.showInList"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"搜索",prop:"query"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-checkbox",{model:{value:t.row.query,callback:function(l){e.$set(t.row,"query",l)},expression:"scope.row.query"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"like搜索",prop:"likeQuery"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-checkbox",{model:{value:t.row.likeQuery,callback:function(l){e.$set(t.row,"likeQuery",l)},expression:"scope.row.likeQuery"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"新增字段",prop:"insertColumn"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-checkbox",{model:{value:t.row.insertColumn,callback:function(l){e.$set(t.row,"insertColumn",l)},expression:"scope.row.insertColumn"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"非空",prop:"notnull"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-checkbox",{model:{value:t.row.notnull,callback:function(l){e.$set(t.row,"notnull",l)},expression:"scope.row.notnull"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"非空提示",prop:"notice"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{size:"small"},model:{value:t.row.notice,callback:function(l){e.$set(t.row,"notice",l)},expression:"scope.row.notice"}})]}}])})],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),l("el-button",{attrs:{loading:e.submiting,type:"primary"},on:{click:e.handleGenerate}},[e._v("立即生成")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="generator.vue";t.default=d.exports},omC7:function(e,t,l){e.exports={default:l("aFNf"),__esModule:!0}}}]);